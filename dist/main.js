(()=>{"use strict";var e,t="http://172.16.115.168:80",o=function(e,t,o){var n=JSON.stringify(o),s=new Headers;s.append("Content-Type","application/json"),s.append("Data-Body",n);var r={method:"GET",headers:s,redirect:"follow"};try{fetch(e,r).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return t(e,!0)}))}catch(e){t(e,!0)}},n=function(e,t,o){var n=JSON.stringify(t),s=new Headers;s.append("Content-Type","application/json");try{fetch(e,{method:"POST",headers:s,body:n,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){return o(e)})).catch((function(e){return o(e,!0)}))}catch(e){o(e,!0)}},s={createRoom:document.getElementById("create-room"),roomSearch:document.getElementById("room-search"),roomList:document.getElementById("room-list-container"),usernameDisplay:document.getElementById("username-display"),logOut:document.getElementById("log-out"),roomTitle:document.getElementById("room-title"),chatList:document.getElementById("chat-list-container"),chatField:document.getElementById("chat-field"),popup:document.getElementById("popup"),popupForm:document.getElementById("popup-form")},r=function(){s.chatField.addEventListener("keypress",(function(e){sessionStorage.getItem("roomId")&&"undefined"!==sessionStorage.getItem("roomId")&&"Enter"===e.key&&n(t+"/api/messages/post",{token:sessionStorage.getItem("token"),roomId:sessionStorage.getItem("roomId"),message:s.chatField.value},(function(e){if(e.success&&"success"===e.response){var t=document.createElement("div");t.textContent=s.chatField.value,t.className="chat right",s.chatList.appendChild(t),s.chatField.value=""}}))}))},a=function(e){s.roomTitle.textContent=e.name,s.chatList.innerHTML="",o(t+"/api/messages/getlist",(function(e){for(var t in e.messages){var o=document.createElement("div");e.messages[t].author===sessionStorage.getItem("userId")?(o.textContent=e.messages[t].message,o.className="chat right"):(o.textContent="["+e.messages[t].author+"]: "+e.messages[t].message,o.className="chat left"),s.chatList.appendChild(o)}}),{messages:e.messages})},i=function(){s.createRoom.addEventListener("click",(function(){d("createRoom")})),m()},m=function(){s.roomList.innerHTML="";var n=sessionStorage.getItem("token");n&&o(t+"/api/rooms/getuser",(function(r){if(!r.success)return console.warn("error getting user: "+r.response);o(t+"/api/rooms/getlist",(function(t){if(!t.success)return console.warn("error getting roomlist: "+t.response);for(var o=function(o){var n=document.createElement("button");n.className="room",n.textContent=t.rooms[o].name,s.roomList.appendChild(n),n.addEventListener("click",(function(){e!=n&&(e.className="room",n.className="room active",e=n,sessionStorage.setItem("roomId",t.rooms[o].roomId),a(t.rooms[o]))})),0!==o||sessionStorage.getItem("roomId")&&"undefined"!==sessionStorage.getItem("roomId")?t.rooms[o].roomId===sessionStorage.getItem("roomId")&&(n.className="room active",e=n,sessionStorage.setItem("roomId",t.rooms[o].roomId),a(t.rooms[o])):(n.className="room active",e=n,sessionStorage.setItem("roomId",t.rooms[o].roomId),a(t.rooms[o]))},n=0;n<t.rooms.length;n++)o(n)}),{token:n,rooms:r.rooms})}),{token:n,relation:["joined","created"],types:["public","hidden","private"]})},c={login:{title:"login",objects:[{name:"username"},{name:"password",type:"password"}],api:t+"/api/users/login",created:function(){var e=document.createElement("a");e.textContent="sign up?",e.addEventListener("click",(function(){d("register")}),{once:!0}),s.popupForm.appendChild(e)},completed:function(e){return sessionStorage.setItem("username",e.username),sessionStorage.setItem("userId",e.userId),sessionStorage.setItem("token",e.token),sessionStorage.removeItem("roomId"),i(),p(),r(),!0}},register:{title:"register",objects:[{name:"username"},{name:"email",type:"email"},{name:"password",type:"password"}],api:t+"/api/users/register",created:function(){var e=document.createElement("a");e.textContent="login?",e.addEventListener("click",(function(){d("login")}),{once:!0}),s.popupForm.appendChild(e)},completed:function(){return d("login")}},createRoom:{title:"create room",objects:[{name:"name",label:"room name"},{name:"description"},{name:"status",label:"type (public/hidden/private)"},{name:"password (leave blank if public)",type:"password"}],api:t+"/api/rooms/create",created:function(){var e=document.createElement("button");e.textContent="cancel",e.addEventListener("click",(function(){s.popupForm.innerHTML="",s.popup.className="hidden"}),{once:!0}),s.popupForm.appendChild(e)}},joinRoom:{title:"join room",objects:[{name:"password",type:"password"}],api:t+"/api/rooms/join"}},d=function(e,t){s.popup.className="",c[e]||(s.popupForm.innerHTML="form inputs of name "+e+" not available.",console.error("form inputs of name "+e+" not available.")),s.popupForm.innerHTML=c[e].title+(t?"\n"+t:"");for(var o=c[e].objects,r={},a=0;a<o.length;a++){var i="temp-"+o[a].name+"-("+Math.random()+")",m=document.createElement("label");m.htmlFor=i,m.textContent=o[a].label||o[a].name;var p=document.createElement("input");p.id=i,p.placeholder="...",p.type=o[a].type||"text",s.popupForm.append(m,p),r[o[a].name]=p}c[e].created&&c[e].created();var u=document.createElement("button");return u.textContent=c[e].title,s.popupForm.appendChild(u),u.addEventListener("click",(function(){var t={token:sessionStorage.getItem("token")};for(var o in r)t[o]=r[o].value;n(c[e].api,t,(function(t){return t.success?(s.popup.className="hidden",c[e].completed?c[e].completed(t):void 0):d(e,t.response)}))}),{once:!0}),!0},p=function(){sessionStorage.getItem("username")&&(s.usernameDisplay.textContent=sessionStorage.getItem("username")),s.logOut.addEventListener("click",(function(){sessionStorage.getItem("token")&&n(t+"/api/users/logout",{token:sessionStorage.getItem("token")},(function(){s.roomList.innerHTML="",s.chatList.innerHTML="",sessionStorage.removeItem("token"),d("login")}))}))};sessionStorage.getItem("token")?n(t+"/api/users/checktoken",{token:sessionStorage.getItem("token")},(function(e){!0!==e.success||"success"!==e.response?d("login","expired"===e.response?"session expired":void 0):(i(),p(),r(),s.popup.className="hidden")})):d("login")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9td29ya2pzLWFwcC8uL3NyYy9hamF4LnRzIiwid2VicGFjazovL2Zyb213b3JranMtYXBwLy4vc3JjL3Jvb21IYW5kbGVyLnRzIiwid2VicGFjazovL2Zyb213b3JranMtYXBwLy4vc3JjL2RvbS50cyIsIndlYnBhY2s6Ly9mcm9td29ya2pzLWFwcC8uL3NyYy9tZXNzYWdlSGFuZGxlci50cyIsIndlYnBhY2s6Ly9mcm9td29ya2pzLWFwcC8uL3NyYy9mb3JtRGF0YS50cyIsIndlYnBhY2s6Ly9mcm9td29ya2pzLWFwcC8uL3NyYy9wb3B1cEhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vZnJvbXdvcmtqcy1hcHAvLi9zcmMvdXNlckhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vZnJvbXdvcmtqcy1hcHAvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiY3VycmVudFJvb21CdXR0b24iLCJob3N0bmFtZSIsImdldCIsInVybCIsImNhbGxiYWNrIiwiZGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiaGVhZGVycyIsIkhlYWRlcnMiLCJhcHBlbmQiLCJvcHRpb25zIiwibWV0aG9kIiwicmVkaXJlY3QiLCJmZXRjaCIsInRoZW4iLCJqc29uIiwicmVzcG9uc2UiLCJjYXRjaCIsImVycm9yIiwicG9zdCIsImh0bWxFbGVtZW50cyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ1c2VNZXNzYWdlSGFuZGxlciIsImNoYXRGaWVsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsImtleSIsInRva2VuIiwicm9vbUlkIiwibWVzc2FnZSIsInZhbHVlIiwic3VjY2VzcyIsImNoYXRFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50IiwiY2xhc3NOYW1lIiwiY2hhdExpc3QiLCJhcHBlbmRDaGlsZCIsImRpc3BsYXlNZXNzYWdlIiwicm9vbVRpdGxlIiwibmFtZSIsImlubmVySFRNTCIsIm1lc3NhZ2VzIiwiYXV0aG9yIiwidXNlUm9vbUhhbmRsZXIiLCJjcmVhdGVSb29tIiwiZGlzcGxheUZvcm0iLCJ1cGRhdGVSb29tcyIsInJvb21MaXN0IiwidXNlclJlc3BvbnNlIiwiY29uc29sZSIsIndhcm4iLCJyb29tUmVzcG9uc2UiLCJpIiwiYnV0dG9uIiwicm9vbXMiLCJzZXRJdGVtIiwibGVuZ3RoIiwicmVsYXRpb24iLCJ0eXBlcyIsImZvcm1EYXRhIiwibG9naW4iLCJ0aXRsZSIsIm9iamVjdHMiLCJ0eXBlIiwiYXBpIiwiY3JlYXRlZCIsIm9uY2UiLCJwb3B1cEZvcm0iLCJjb21wbGV0ZWQiLCJ1c2VybmFtZSIsInVzZXJJZCIsInJlbW92ZUl0ZW0iLCJ1c2VVc2VySGFuZGxlciIsInJlZ2lzdGVyIiwibGFiZWwiLCJwb3B1cCIsImpvaW5Sb29tIiwiZm9ybUlucHV0cyIsImlucHV0T2JqZWN0cyIsInRlbXBJZCIsIk1hdGgiLCJyYW5kb20iLCJodG1sRm9yIiwiaW5wdXRFbGVtZW50IiwiaWQiLCJwbGFjZWhvbGRlciIsInN1Ym1pdEJ1dHRvbiIsImZpZWxkIiwidXNlcm5hbWVEaXNwbGF5IiwibG9nT3V0IiwidW5kZWZpbmVkIl0sIm1hcHBpbmdzIjoibUJBU1EsSUNKSkEsRURJVUMsRUFBVywyQkFFWEMsRUFBTSxTQUFDQyxFQUFhQyxFQUF1REMsR0FJckYsSUFBTUMsRUFBT0MsS0FBS0MsVUFBVUgsR0FFdEJJLEVBQVUsSUFBSUMsUUFFcEJELEVBQVFFLE9BQU8sZUFBZ0Isb0JBRS9CRixFQUFRRSxPQUFPLFlBQWFMLEdBRzVCLElBQU1NLEVBQXVCLENBQ3pCQyxPQUFRLE1BQ1JKLFFBQVNBLEVBQ1RLLFNBQVUsVUFJZCxJQUdJQyxNQUFNWixFQUFLUyxHQUNOSSxNQUFLLFNBQUFWLEdBQVEsT0FBQUEsRUFBS1csVUFDbEJELE1BQUssU0FBQUUsR0FBWSxPQUFBZCxFQUFTYyxNQUMxQkMsT0FBTSxTQUFBQyxHQUFTLE9BQUFoQixFQUFTZ0IsR0FBTyxNQUV0QyxN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QzJCLE1BQU9ILGVBQWVDLFFBQVEsVUFFbEMsSUFBSyxJQUFJK0QsS0FBU1QsRUFDZC9FLEVBQUt3RixHQUFTVCxFQUFhUyxHQUFPMUQsTUFHdENkLEVBQUs0QyxFQUFTcEIsR0FBTXlCLElBQUtqRSxHQUFNLFNBQUNhLEdBQzVCLE9BQUtBLEVBQVNrQixTQUlkZCxFQUFhMkQsTUFBTXpDLFVBQVksU0FDM0J5QixFQUFTcEIsR0FBTTZCLFVBQ1JULEVBQVNwQixHQUFNNkIsVUFBVXhELFFBRHBDLEdBSldpQyxFQUFZTixFQUFNM0IsRUFBU0EsZUFPM0MsQ0FBQ3NELE1BQU0sS0FFSCxHQ3ZERU0sRUFBaUIsV0FDdEJqRCxlQUFlQyxRQUFRLGNBQWFSLEVBQWF3RSxnQkFBZ0J2RCxZQUFjVixlQUFlQyxRQUFRLGFBRTFHUixFQUFheUUsT0FBT3BFLGlCQUFpQixTQUFTLFdBQ3RDRSxlQUFlQyxRQUFRLFVBQ3ZCVCxFQUFLcEIsRUFBVyxvQkFBcUIsQ0FBQytCLE1BQU9ILGVBQWVDLFFBQVEsV0FBVyxXQUMzRVIsRUFBYStCLFNBQVNQLFVBQVksR0FDbEN4QixFQUFhbUIsU0FBU0ssVUFBWSxHQUNsQ2pCLGVBQWVnRCxXQUFXLFNBQzFCMUIsRUFBWSxnQkNMcEJ0QixlQUFlQyxRQUFRLFNBQ3ZCVCxFQUFLcEIsRUFBVyx3QkFBeUIsQ0FBQytCLE1BQU9ILGVBQWVDLFFBQVEsV0FBVyxTQUFDWixJQUNyRCxJQUFyQkEsRUFBU2tCLFNBQTBDLFlBQXRCbEIsRUFBU0EsU0FDeENpQyxFQUFZLFFBQStCLFlBQXRCakMsRUFBU0EsU0FBeUIsdUJBQW9COEUsSUFFM0UvQyxJQUNBNkIsSUFDQXJELElBQ0FILEVBQWEyRCxNQUFNekMsVUFBWSxhQUl2Q1csRUFBWSxVIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBIVFRQIHJlcXVlc3QgKi9cclxuXHJcbi8qKlxyXG4gKiBFeGVjdXRlIEhUVFAgR0VUIHJlcXVlc3QsIHdpdGggZmV0Y2ggYXBpIGFzIEpTT04uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBGb3IgbG9jYWwgbG9jYXRpb24gdXNlIGAvcGF0aC9sb2NhdGlvbmAsIGZvciBvdXRzaWRlIGxvY2F0aW9uIHVzZSBgaHR0cChzKTovL3lvdXJVUkwvbG9jYXRpb25gXHJcbiAqIEBwYXJhbSB7KHJlc3BvbnNlOiBvYmplY3QpID0+IHZvaWR9IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIGhhbmRsaW5nIHRoZSByZXNwb25zZVxyXG4gKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIE9wdGlvbmFsLCBwYXJzZSBhIEphdmFTY3JpcHQgb2JqZWN0IGFzIHJlcXVzdCBib2R5XHJcbiAqL1xyXG5cclxuIGV4cG9ydCBjb25zdCBob3N0bmFtZSA9ICdodHRwOi8vMTcyLjE2LjExNS4xNjg6ODAnXHJcblxyXG4gZXhwb3J0IGNvbnN0IGdldCA9ICh1cmw6IHN0cmluZywgY2FsbGJhY2s6IChyZXNwb25zZTogb2JqZWN0LCBlcnJvcj86IGJvb2xlYW4pID0+IHZvaWQsIGRhdGE/OiBvYmplY3QpOiB2b2lkID0+IHtcclxuICAgIFxyXG4gICAgLy8gc2V0dGluZyB1cCByZXF1ZXN0IGFuZCBib2R5XHJcblxyXG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG5cclxuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xyXG5cclxuICAgIGhlYWRlcnMuYXBwZW5kKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuXHJcbiAgICBoZWFkZXJzLmFwcGVuZChcIkRhdGEtQm9keVwiLCBib2R5KVxyXG5cclxuXHJcbiAgICBjb25zdCBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnXHJcbiAgICB9XHJcblxyXG4gICAgLy8gbWF4aW11bSBlcnJvciBoYW5kbGluZyB0byBtYWludGFpbiBzdGFiaWxpdHlcclxuICAgIHRyeSB7XHJcblxyXG4gICAgICAgIC8vIGV4ZWN1dGUgcmVxdWVzdCwgZm9sbG93cyByZWRpcmVjdHMsIGV4cGVjdHMganNvblxyXG4gICAgICAgIGZldGNoKHVybCwgb3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4oYm9keSA9PiBib2R5Lmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gY2FsbGJhY2socmVzcG9uc2UpKVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY2FsbGJhY2soZXJyb3IsIHRydWUpKTtcclxuXHJcbiAgICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIHRydWUpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBFeGVjdXRlIEhUVFAgR0VUIHJlcXVlc3QsIHdpdGggZmV0Y2ggYXBpIGFzIEpTT04uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVcmwgcmVsYXRpdmUgdG8gcm9vdCwgZm9yIG91dHNpZGUgdXNlIGBodHRwKHMpOi8vYFxyXG4gKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIFBhcnNlIGEgSmF2YVNjcmlwdCBvYmplY3QgYXMgcmVxdXN0IGJvZHlcclxuICogQHBhcmFtIHsocmVzcG9uc2U6IG9iamVjdCkgPT4gdm9pZH0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiBmb3IgaGFuZGxpbmcgdGhlIHJlc3BvbnNlXHJcbiAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvc3QgPSAodXJsOiBzdHJpbmcsIGRhdGE6IG9iamVjdCwgY2FsbGJhY2s6IChyZXNwb25zZTogb2JqZWN0LCBlcnJvcj86IGJvb2xlYW4pID0+IHZvaWQpID0+IHtcclxuICAgIFxyXG4gICAgLy8gc2V0dGluZyB1cCByZXF1ZXN0IGFuZCBib2R5XHJcblxyXG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG5cclxuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xyXG5cclxuICAgIGhlYWRlcnMuYXBwZW5kKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuXHJcblxyXG5cclxuICAgIC8vIG1heGltdW0gZXJyb3IgaGFuZGxpbmcgdG8gbWFpbnRhaW4gc3RhYmlsaXR5XHJcbiAgICB0cnkge1xyXG5cclxuICAgICAgICAvLyBleGVjdXRlIHJlcXVlc3QsIGZvbGxvd3MgcmVkaXJlY3RzLCBleHBlY3RzIGpzb25cclxuICAgICAgICBmZXRjaCh1cmwsIHttZXRob2Q6ICdQT1NUJywgaGVhZGVyczogaGVhZGVycywgYm9keTogYm9keSwgcmVkaXJlY3Q6ICdmb2xsb3cnfSlcclxuICAgICAgICAgICAgLnRoZW4oYm9keSA9PiBib2R5Lmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gY2FsbGJhY2socmVzcG9uc2UpKVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY2FsbGJhY2soZXJyb3IsIHRydWUpKTtcclxuXHJcbiAgICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIHRydWUpO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IGdldCwgaG9zdG5hbWUgfSBmcm9tIFwiLi9hamF4XCJcclxuaW1wb3J0IHsgaHRtbEVsZW1lbnRzIH0gZnJvbSBcIi4vZG9tXCJcclxuaW1wb3J0IHsgZGlzcGxheU1lc3NhZ2UgfSBmcm9tIFwiLi9tZXNzYWdlSGFuZGxlclwiXHJcbmltcG9ydCB7IGRpc3BsYXlGb3JtIH0gZnJvbSBcIi4vcG9wdXBIYW5kbGVyXCJcclxuXHJcbmxldCBjdXJyZW50Um9vbUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlUm9vbUhhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICBodG1sRWxlbWVudHMuY3JlYXRlUm9vbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBkaXNwbGF5Rm9ybSgnY3JlYXRlUm9vbScpXHJcbiAgICB9KVxyXG4gICAgdXBkYXRlUm9vbXMoKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZVJvb21zID0gKCkgPT4ge1xyXG4gICAgaHRtbEVsZW1lbnRzLnJvb21MaXN0LmlubmVySFRNTCA9ICcnO1xyXG4gICAgbGV0IHRva2VuID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKVxyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuO1xyXG5cclxuICAgIGdldChob3N0bmFtZSArICcvYXBpL3Jvb21zL2dldHVzZXInLCAodXNlclJlc3BvbnNlOiBhbnkpID0+IHtcclxuICAgICAgICBpZiAoIXVzZXJSZXNwb25zZS5zdWNjZXNzKSByZXR1cm4gY29uc29sZS53YXJuKGBlcnJvciBnZXR0aW5nIHVzZXI6ICR7dXNlclJlc3BvbnNlLnJlc3BvbnNlfWApO1xyXG5cclxuICAgICAgICBnZXQoaG9zdG5hbWUgKyAnL2FwaS9yb29tcy9nZXRsaXN0JywgKHJvb21SZXNwb25zZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcm9vbVJlc3BvbnNlLnN1Y2Nlc3MpIHJldHVybiBjb25zb2xlLndhcm4oYGVycm9yIGdldHRpbmcgcm9vbWxpc3Q6ICR7cm9vbVJlc3BvbnNlLnJlc3BvbnNlfWApXHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvb21SZXNwb25zZS5yb29tcy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBidXR0b24gPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc05hbWUgPSAncm9vbSc7XHJcbiAgICAgICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSByb29tUmVzcG9uc2Uucm9vbXNbaV0ubmFtZTtcclxuICAgICAgICAgICAgICAgIGh0bWxFbGVtZW50cy5yb29tTGlzdC5hcHBlbmRDaGlsZChidXR0b24pXHJcblxyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Um9vbUJ1dHRvbiAhPSBidXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFJvb21CdXR0b24uY2xhc3NOYW1lID0gJ3Jvb20nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NOYW1lID0gJ3Jvb20gYWN0aXZlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFJvb21CdXR0b24gPSBidXR0b247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Jvb21JZCcsIHJvb21SZXNwb25zZS5yb29tc1tpXS5yb29tSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKHJvb21SZXNwb25zZS5yb29tc1tpXSkgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCAmJiAoIXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Jvb21JZCcpIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Jvb21JZCcpID09PSAndW5kZWZpbmVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NOYW1lID0gJ3Jvb20gYWN0aXZlJztcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Um9vbUJ1dHRvbiA9IGJ1dHRvbjtcclxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdyb29tSWQnLCByb29tUmVzcG9uc2Uucm9vbXNbaV0ucm9vbUlkKVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKHJvb21SZXNwb25zZS5yb29tc1tpXSkgICAgXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJvb21SZXNwb25zZS5yb29tc1tpXS5yb29tSWQgPT09IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Jvb21JZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9ICdyb29tIGFjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJvb21CdXR0b24gPSBidXR0b247XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgncm9vbUlkJywgcm9vbVJlc3BvbnNlLnJvb21zW2ldLnJvb21JZClcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TWVzc2FnZShyb29tUmVzcG9uc2Uucm9vbXNbaV0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB7dG9rZW46IHRva2VuLCByb29tczogdXNlclJlc3BvbnNlLnJvb21zfSlcclxuICAgIH0sIHt0b2tlbjogdG9rZW4sIHJlbGF0aW9uOiBbJ2pvaW5lZCcsICdjcmVhdGVkJ10sIHR5cGVzOiBbJ3B1YmxpYycsICdoaWRkZW4nLCAncHJpdmF0ZSddfSlcclxufSIsImV4cG9ydCBjb25zdCBodG1sRWxlbWVudHMgPSB7XHJcbiAgICAnY3JlYXRlUm9vbSc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGUtcm9vbScpISxcclxuICAgICdyb29tU2VhcmNoJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb20tc2VhcmNoJykhLFxyXG4gICAgJ3Jvb21MaXN0JzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb20tbGlzdC1jb250YWluZXInKSEsXHJcbiAgICAndXNlcm5hbWVEaXNwbGF5JzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJuYW1lLWRpc3BsYXknKSEsXHJcbiAgICAnbG9nT3V0JzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZy1vdXQnKSEsXHJcbiAgICAncm9vbVRpdGxlJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb20tdGl0bGUnKSEsXHJcbiAgICAnY2hhdExpc3QnOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdC1saXN0LWNvbnRhaW5lcicpISxcclxuICAgICdjaGF0RmllbGQnOiA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdC1maWVsZCcpISxcclxuICAgICdwb3B1cCc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cCcpISxcclxuICAgICdwb3B1cEZvcm0nOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAtZm9ybScpISxcclxufSIsImltcG9ydCB7IGdldCwgaG9zdG5hbWUsIHBvc3QgfSBmcm9tIFwiLi9hamF4XCJcclxuaW1wb3J0IHsgaHRtbEVsZW1lbnRzIH0gZnJvbSBcIi4vZG9tXCJcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VNZXNzYWdlSGFuZGxlciA9ICgpID0+IHtcclxuICAgIGh0bWxFbGVtZW50cy5jaGF0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICBpZiAoIXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Jvb21JZCcpIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Jvb21JZCcpID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xyXG4gICAgICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgcG9zdChob3N0bmFtZSArICcvYXBpL21lc3NhZ2VzL3Bvc3QnLCB7XHJcbiAgICAgICAgICAgICAgICB0b2tlbjogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSxcclxuICAgICAgICAgICAgICAgIHJvb21JZDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncm9vbUlkJyksXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBodG1sRWxlbWVudHMuY2hhdEZpZWxkLnZhbHVlLFxyXG4gICAgICAgICAgICB9LCAocmVzcG9uc2U6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UucmVzcG9uc2UgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjaGF0RWxlbWVudCA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXRFbGVtZW50LnRleHRDb250ZW50ID0gaHRtbEVsZW1lbnRzLmNoYXRGaWVsZC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjaGF0RWxlbWVudC5jbGFzc05hbWUgPSBcImNoYXQgcmlnaHRcIiAgICBcclxuICAgICAgICAgICAgICAgICAgICBodG1sRWxlbWVudHMuY2hhdExpc3QuYXBwZW5kQ2hpbGQoY2hhdEVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBodG1sRWxlbWVudHMuY2hhdEZpZWxkLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRpc3BsYXlNZXNzYWdlID0gKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgaHRtbEVsZW1lbnRzLnJvb21UaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIGh0bWxFbGVtZW50cy5jaGF0TGlzdC5pbm5lckhUTUwgPSAnJ1xyXG4gICAgZ2V0KGhvc3RuYW1lICsgJy9hcGkvbWVzc2FnZXMvZ2V0bGlzdCcsIChyZXNwb25zZTogYW55KSA9PiB7XHJcbiAgICAgICAgZm9yIChsZXQgbWVzc2FnZSBpbiByZXNwb25zZS5tZXNzYWdlcykge1xyXG4gICAgICAgICAgICBsZXQgY2hhdEVsZW1lbnQgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm1lc3NhZ2VzW21lc3NhZ2VdLmF1dGhvciA9PT0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykpIHtcclxuICAgICAgICAgICAgICAgIGNoYXRFbGVtZW50LnRleHRDb250ZW50ID0gcmVzcG9uc2UubWVzc2FnZXNbbWVzc2FnZV0ubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIGNoYXRFbGVtZW50LmNsYXNzTmFtZSA9IFwiY2hhdCByaWdodFwiXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjaGF0RWxlbWVudC50ZXh0Q29udGVudCA9ICdbJyArIHJlc3BvbnNlLm1lc3NhZ2VzW21lc3NhZ2VdLmF1dGhvciArICddOiAnICsgcmVzcG9uc2UubWVzc2FnZXNbbWVzc2FnZV0ubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIGNoYXRFbGVtZW50LmNsYXNzTmFtZSA9IFwiY2hhdCBsZWZ0XCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodG1sRWxlbWVudHMuY2hhdExpc3QuYXBwZW5kQ2hpbGQoY2hhdEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIHttZXNzYWdlczogZGF0YS5tZXNzYWdlc30pXHJcbn0iLCJpbXBvcnQgeyBodG1sRWxlbWVudHMgfSBmcm9tIFwiLi9kb21cIjtcclxuaW1wb3J0IHsgZGlzcGxheUZvcm0gfSBmcm9tIFwiLi9wb3B1cEhhbmRsZXJcIjtcclxuaW1wb3J0IHsgaG9zdG5hbWUgfSBmcm9tICcuL2FqYXgnO1xyXG5pbXBvcnQgeyB1c2VSb29tSGFuZGxlciB9IGZyb20gXCIuL3Jvb21IYW5kbGVyXCI7XHJcbmltcG9ydCB7IHVzZVVzZXJIYW5kbGVyIH0gZnJvbSBcIi4vdXNlckhhbmRsZXJcIjtcclxuaW1wb3J0IHsgdXNlTWVzc2FnZUhhbmRsZXIgfSBmcm9tIFwiLi9tZXNzYWdlSGFuZGxlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1EYXRhOiBhbnkgPSB7XHJcbiAgICBsb2dpbjoge1xyXG4gICAgICAgIHRpdGxlOiAnbG9naW4nLFxyXG4gICAgICAgIG9iamVjdHM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3VzZXJuYW1lJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3Bhc3N3b3JkJyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIGFwaTogaG9zdG5hbWUgKyAnL2FwaS91c2Vycy9sb2dpbicsXHJcbiAgICAgICAgY3JlYXRlZDogKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgYnV0dG9uID0gPEhUTUxFbGVtZW50PmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ3NpZ24gdXA/J1xyXG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5Rm9ybSgncmVnaXN0ZXInKTtcclxuICAgICAgICAgICAgfSwge29uY2U6IHRydWV9KVxyXG4gICAgICAgICAgICBodG1sRWxlbWVudHMucG9wdXBGb3JtLmFwcGVuZENoaWxkKGJ1dHRvbik7ICAgIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tcGxldGVkOiAocmVzcG9uc2U6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd1c2VybmFtZScsIHJlc3BvbnNlLnVzZXJuYW1lKTtcclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgcmVzcG9uc2UudXNlcklkKTtcclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXNwb25zZS50b2tlbik7XHJcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3Jvb21JZCcpXHJcblxyXG4gICAgICAgICAgICB1c2VSb29tSGFuZGxlcigpO1xyXG4gICAgICAgICAgICB1c2VVc2VySGFuZGxlcigpO1xyXG4gICAgICAgICAgICB1c2VNZXNzYWdlSGFuZGxlcigpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgcmVnaXN0ZXI6IHtcclxuICAgICAgICB0aXRsZTogJ3JlZ2lzdGVyJyxcclxuICAgICAgICBvYmplY3RzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICd1c2VybmFtZScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdlbWFpbCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnZW1haWwnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdwYXNzd29yZCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBhcGk6IGhvc3RuYW1lICsgJy9hcGkvdXNlcnMvcmVnaXN0ZXInLFxyXG4gICAgICAgIGNyZWF0ZWQ6ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGJ1dHRvbiA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdsb2dpbj8nXHJcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlGb3JtKCdsb2dpbicpO1xyXG4gICAgICAgICAgICB9LCB7b25jZTogdHJ1ZX0pXHJcbiAgICAgICAgICAgIGh0bWxFbGVtZW50cy5wb3B1cEZvcm0uYXBwZW5kQ2hpbGQoYnV0dG9uKTsgICAgICBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBsZXRlZDogKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZGlzcGxheUZvcm0oJ2xvZ2luJylcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNyZWF0ZVJvb206IHtcclxuICAgICAgICB0aXRsZTogJ2NyZWF0ZSByb29tJyxcclxuICAgICAgICBvYmplY3RzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICduYW1lJyxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiAncm9vbSBuYW1lJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnZGVzY3JpcHRpb24nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnc3RhdHVzJyxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiAndHlwZSAocHVibGljL2hpZGRlbi9wcml2YXRlKSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3Bhc3N3b3JkIChsZWF2ZSBibGFuayBpZiBwdWJsaWMpJyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIGFwaTogaG9zdG5hbWUgKyAnL2FwaS9yb29tcy9jcmVhdGUnLFxyXG4gICAgICAgIGNyZWF0ZWQ6ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGJ1dHRvbiA9IDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ2NhbmNlbCdcclxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaHRtbEVsZW1lbnRzLnBvcHVwRm9ybS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgIGh0bWxFbGVtZW50cy5wb3B1cC5jbGFzc05hbWUgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgfSwge29uY2U6IHRydWV9KVxyXG4gICAgICAgICAgICBodG1sRWxlbWVudHMucG9wdXBGb3JtLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGpvaW5Sb29tOiB7XHJcbiAgICAgICAgdGl0bGU6ICdqb2luIHJvb20nLFxyXG4gICAgICAgIG9iamVjdHM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3Bhc3N3b3JkJyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdLFxyXG4gICAgICAgIGFwaTogaG9zdG5hbWUgKyAnL2FwaS9yb29tcy9qb2luJyxcclxuICAgIH1cclxufSIsImltcG9ydCB7IHBvc3QgfSBmcm9tICcuL2FqYXgnXHJcbmltcG9ydCB7IGh0bWxFbGVtZW50cyB9IGZyb20gJy4vZG9tJ1xyXG5pbXBvcnQgeyBmb3JtRGF0YSB9IGZyb20gJy4vZm9ybURhdGEnXHJcblxyXG5leHBvcnQgY29uc3QgZGlzcGxheUZvcm0gPSAobmFtZTogc3RyaW5nLCBtZXNzYWdlPzogc3RyaW5nKSA9PiB7XHJcbiAgICBodG1sRWxlbWVudHMucG9wdXAuY2xhc3NOYW1lID0gJyc7XHJcbiAgICBpZiAoIWZvcm1EYXRhW25hbWVdKSB7XHJcbiAgICAgICAgaHRtbEVsZW1lbnRzLnBvcHVwRm9ybS5pbm5lckhUTUwgPSBgZm9ybSBpbnB1dHMgb2YgbmFtZSAke25hbWV9IG5vdCBhdmFpbGFibGUuYDtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBmb3JtIGlucHV0cyBvZiBuYW1lICR7bmFtZX0gbm90IGF2YWlsYWJsZS5gKTtcclxuICAgIH1cclxuICAgIGh0bWxFbGVtZW50cy5wb3B1cEZvcm0uaW5uZXJIVE1MID0gZm9ybURhdGFbbmFtZV0udGl0bGUgKyAobWVzc2FnZSA/ICdcXG4nICsgbWVzc2FnZSA6ICcnKTtcclxuXHJcbiAgICBsZXQgZm9ybUlucHV0cyA9IGZvcm1EYXRhW25hbWVdLm9iamVjdHM7XHJcbiAgICBsZXQgaW5wdXRPYmplY3RzOiB7IFtrZXk6IHN0cmluZ10gOiBIVE1MSW5wdXRFbGVtZW50fSA9IHt9XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtSW5wdXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHRlbXBJZCA9IGB0ZW1wLSR7Zm9ybUlucHV0c1tpXS5uYW1lfS0oJHtNYXRoLnJhbmRvbSgpfSlgXHJcblxyXG4gICAgICAgIGxldCBsYWJlbCA9IDxIVE1MTGFiZWxFbGVtZW50PmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcbiAgICAgICAgbGFiZWwuaHRtbEZvciA9IHRlbXBJZDtcclxuICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IGZvcm1JbnB1dHNbaV0ubGFiZWwgfHwgZm9ybUlucHV0c1tpXS5uYW1lO1xyXG5cclxuICAgICAgICBsZXQgaW5wdXRFbGVtZW50ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuaWQgPSB0ZW1wSWQ7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LnBsYWNlaG9sZGVyID0gJy4uLic7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LnR5cGUgPSBmb3JtSW5wdXRzW2ldLnR5cGUgfHwgJ3RleHQnLFxyXG5cclxuICAgICAgICBodG1sRWxlbWVudHMucG9wdXBGb3JtLmFwcGVuZChsYWJlbCwgaW5wdXRFbGVtZW50KTtcclxuICAgICAgICBpbnB1dE9iamVjdHNbZm9ybUlucHV0c1tpXS5uYW1lXSA9IGlucHV0RWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZm9ybURhdGFbbmFtZV0uY3JlYXRlZClcclxuICAgICAgICBmb3JtRGF0YVtuYW1lXS5jcmVhdGVkKCk7XHJcblxyXG4gICAgLy8gc3VibWl0IGJ1dHRvblxyXG4gICAgXHJcbiAgICBsZXQgc3VibWl0QnV0dG9uID0gPEhUTUxCdXR0b25FbGVtZW50PmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gZm9ybURhdGFbbmFtZV0udGl0bGU7XHJcbiAgICBodG1sRWxlbWVudHMucG9wdXBGb3JtLmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbilcclxuXHJcbiAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGRhdGE6IHsgW2ZpZWxkOiBzdHJpbmddOiBhbnkgfSA9IHtcclxuICAgICAgICAgICAgdG9rZW46IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyksXHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKGxldCBmaWVsZCBpbiBpbnB1dE9iamVjdHMpIHtcclxuICAgICAgICAgICAgZGF0YVtmaWVsZF0gPSBpbnB1dE9iamVjdHNbZmllbGRdLnZhbHVlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwb3N0KGZvcm1EYXRhW25hbWVdLmFwaSwgZGF0YSwgKHJlc3BvbnNlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGxheUZvcm0obmFtZSwgcmVzcG9uc2UucmVzcG9uc2UpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGh0bWxFbGVtZW50cy5wb3B1cC5jbGFzc05hbWUgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICBpZiAoZm9ybURhdGFbbmFtZV0uY29tcGxldGVkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1EYXRhW25hbWVdLmNvbXBsZXRlZChyZXNwb25zZSk7XHJcbiAgICAgICAgfSlcclxuICAgIH0sIHtvbmNlOiB0cnVlfSlcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufSIsImltcG9ydCB7IGhvc3RuYW1lLCBwb3N0IH0gZnJvbSBcIi4vYWpheFwiXHJcbmltcG9ydCB7IGh0bWxFbGVtZW50cyB9IGZyb20gXCIuL2RvbVwiXHJcbmltcG9ydCB7IGRpc3BsYXlGb3JtIH0gZnJvbSBcIi4vcG9wdXBIYW5kbGVyXCJcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VVc2VySGFuZGxlciA9ICgpID0+IHtcclxuICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpKSBodG1sRWxlbWVudHMudXNlcm5hbWVEaXNwbGF5LnRleHRDb250ZW50ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcm5hbWUnKTtcclxuXHJcbiAgICBodG1sRWxlbWVudHMubG9nT3V0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKSB7XHJcbiAgICAgICAgICAgIHBvc3QoaG9zdG5hbWUgKyAnL2FwaS91c2Vycy9sb2dvdXQnLCB7dG9rZW46IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyl9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBodG1sRWxlbWVudHMucm9vbUxpc3QuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgICAgICBodG1sRWxlbWVudHMuY2hhdExpc3QuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpXHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5Rm9ybSgnbG9naW4nKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59IiwiaW1wb3J0IHsgaG9zdG5hbWUsIHBvc3QgfSBmcm9tIFwiLi9hamF4XCI7XHJcbmltcG9ydCB7IGh0bWxFbGVtZW50cyB9IGZyb20gXCIuL2RvbVwiO1xyXG5pbXBvcnQgeyB1c2VVc2VySGFuZGxlciB9IGZyb20gXCIuL3VzZXJIYW5kbGVyXCI7XHJcbmltcG9ydCB7IGRpc3BsYXlGb3JtIH0gZnJvbSBcIi4vcG9wdXBIYW5kbGVyXCI7XHJcbmltcG9ydCB7IHVzZVJvb21IYW5kbGVyIH0gZnJvbSBcIi4vcm9vbUhhbmRsZXJcIjtcclxuaW1wb3J0IHsgdXNlTWVzc2FnZUhhbmRsZXIgfSBmcm9tIFwiLi9tZXNzYWdlSGFuZGxlclwiO1xyXG5cclxuY29uc3Qgc3RhcnQgPSAoKSA9PiB7XHJcbiAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkge1xyXG4gICAgICAgIHBvc3QoaG9zdG5hbWUgKyAnL2FwaS91c2Vycy9jaGVja3Rva2VuJywge3Rva2VuOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpfSwgKHJlc3BvbnNlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCEocmVzcG9uc2Uuc3VjY2VzcyA9PT0gdHJ1ZSAmJiByZXNwb25zZS5yZXNwb25zZSA9PT0gJ3N1Y2Nlc3MnKSkge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheUZvcm0oJ2xvZ2luJywgcmVzcG9uc2UucmVzcG9uc2UgPT09ICdleHBpcmVkJyA/ICdzZXNzaW9uIGV4cGlyZWQnIDogdW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHVzZVJvb21IYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICB1c2VVc2VySGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgdXNlTWVzc2FnZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgIGh0bWxFbGVtZW50cy5wb3B1cC5jbGFzc05hbWUgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRpc3BsYXlGb3JtKCdsb2dpbicpXHJcbiAgICB9XHJcbn1cclxuXHJcbnN0YXJ0KCk7Il0sInNvdXJjZVJvb3QiOiIifQ==